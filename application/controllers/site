 <html>
 <?php
 public function sendMail() {

            //load form validation class and models
            $this->load->library("form_validation");
            $this->load->model("model_db");
            $this->form_validation->set_rules("name", "Name", "required|trim");
            $this->form_validation->set_rules("email", "Email", "required|trim|valid_email");
            $this->form_validation->set_rules("msg", "Message", "required|trim");

            $this->form_validation->set_rules("phone", "Phone Number", "trim|numeric");

            $n = $this->input->post("name");
            $email = $this->input->post("email");
            $p = $this->input->post("phone");
            $s = $this->input->post("msg");
            $headers = "From: $email";

            //create body of email
            $body = " 
                       
                Name      : $n,
                Email     : $email,
                Telephone : $p,
                Message   : $s,
                \n\n
                        ";

            //send mail if there is no validation errors
            if ($this->form_validation->run() == TRUE) {
                mail('lmbkarunanayake93@gmail.com', 'Inquery', $body, $headers);
            }


            $newNoti = array(
                "name" => $this->input->post('name'),
                "email" => $this->input->post('email'),
                "phone" => $this->input->post('phone'),
                "msg" => $this->input->post('msg'),
                "date" => date('Y-m-d')
            );

            //after sending mail above detials will save in database from 'addNotification' function in model_db
            if ($this->form_validation->run() == FALSE) {
                $this->load->view("view_contact");
            } else {
                $data['msg'] = "Message Sent!!";
                $this->model_db->addNotification($newNoti);
                $this->load->view("view_contact", $data);
            }

        }

?>
</html>